#################################################################
#                                                               #
# Copyright (c) 2020 YottaDB LLC and/or its subsidiaries.  #
# All rights reserved.                                          #
#                                                               #
#       This source code contains the intellectual property     #
#       of its copyright holder(s), and is made available       #
#       under a license.  If you do not know the terms of       #
#       the license, please stop and do not read further.       #
#                                                               #
#################################################################

stages:
  - build

before_script:
    - apt-get update -qq && apt-get install -y -qq --no-install-recommends make rsync tcsh sphinx-common python3-pip python3-setuptools python3-wheel wget
    - pip3 install sphinx_rtd_theme sphinxprettysearchresults

deadlinks:
  stage: build
  image: bitnami/minideb
  script:
    - make html
    - ./buildall.sh target
    - wget https://github.com/deadlinks/cargo-deadlinks/releases/download/0.4.2/deadlinks-linux
    - chmod +x ./deadlinks-linux
    - ./deadlinks-linux deadlinks -v --check-http --dir target
